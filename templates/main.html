<!DOCTYPE html>
<html>
    <head>
        <title>
            Home
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="module" src="{{ url_for('static', path='/firebase-login.js') }}"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="{{ url_for('static', path='/styles.css') }}"">
    </head>
    <body>
        {% block content %}
            <main id="main-box" style="margin: 0 400px;">
                <ul class="nav nav-pills justify-content-center" style="margin: 10px auto;">
                    <li class="nav-item">
                        <div id="login-box" hidden="true">
                            <div class="row mb-3">
                                <label for="email" class="col-sm-3 col-form-label" id="emailLabel">Email</label>
                                <div class="col-sm-10">
                                  <input type="email" class="form-control" id="email">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="password" class="col-sm-3 col-form-label" id="passwordLabel">Password</label>
                                <div class="col-sm-10">
                                  <input type="password" class="form-control" id="password">
                                </div>
                            </div>
                            <button type="button" class="btn btn-success" id="login">Login</button>
                            <button type="button" class="btn btn-primary" id="sign-up">Sign Up</button>
                        </div>
                    </li>
                </ul> 
                <ul class="nav nav-pills justify-content-end">
                    <li class="nav-item">
                        <button type="button" class="btn btn-danger" id="sign-out" hidden="true">Sign Out</button>
                    </li>
                </ul>
                {% if user_token %}
                    <section id="navigation">
                        <header class="p-3 mb-3 border-bottom" id="header">
                            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                                <a class="navbar-brand" href="/">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
                                    <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5"/>
                                  </svg>
                                </a>
                                <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                                    <li>
                                        <a class="nav-link" href="/post">Add Tweet</a>
                                    </li>
                                    <form class="d-flex" action="/search-username" method="post" style="margin: 0 10px;">
                                        <input name="username" class="form-control me-2" type="search" placeholder="username" aria-label="Search">
                                        <button id="search-user" class="btn btn-outline-primary" type="submit">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                            </svg>
                                        </button>
                                    </form>
                                    <form class="d-flex" action="/search-tweet" method="post" style="margin: 0 10px;">
                                        <input name="content" class="form-control me-2" type="search" placeholder="keyword" aria-label="Search">
                                        <button id="search-tweet" class="btn btn-outline-primary" type="submit">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                            </svg>
                                        </button>
                                    </form>
                                    <div class="dropdown">
                                        <a role="button" href="#" class="btn btn-secondary dropdown-toggle" id="dropdownMenu" data-bs-toggle="dropdown">
                                            {{ user_info.get("username") }}
                                        </a>
                                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu">
                                            <li>
                                                <a class="dropdown-item nav-link" href="/profile">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                                                        <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                                                      </svg> Profile
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </ul>
                            </div>
                        </header>
                    </section>
                    <section id="timeline" style="margin: 100px 200px;">
                        {% if errors %}
                            <ul>
                                <li class="alert alert-danger">{{ errors }}</li>
                            </ul>
                        {% endif %}
                        {% for tweet in tweets %}
                            <p>{{ tweet.get("body") }}</p>
                            {% if tweet.get('image_url') %}
                                <img src="{{ tweet.get('image_url') }}" alt="Image for this tweet" height="100px" width="100px">
                            {% endif %}
                            <p style="font-size: smaller; font-style: italic; text-align: right;">{{ tweet.get("username") }} on {{ tweet.get("date") }}</p>
                            <hr>
                        {% endfor %}
                    </section>
                {% endif %}
            </main>
        {% endblock content %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        </body>
</html>