<!DOCTYPE html>
<html>
    <head>
        <title>
            Home
        </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script type="module" src="{{ url_for('static', path='/firebase-login.js') }}"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="{{ url_for('static', path='/styles.css') }}"">
    </head>
    <body>
        {% block content %}
            <main id="main-box" style="margin: 0 400px;">
                <ul class="nav nav-pills justify-content-center" style="margin: 10px auto;">
                    <li class="nav-item">
                        <div id="login-box" hidden="true">
                            <div class="row mb-3">
                                <label for="email" class="col-sm-3 col-form-label" id="emailLabel">Email</label>
                                <div class="col-sm-10">
                                  <input type="email" class="form-control" id="email">
                                </div>
                            </div>
                            <div class="row mb-3">
                                <label for="password" class="col-sm-3 col-form-label" id="passwordLabel">Password</label>
                                <div class="col-sm-10">
                                  <input type="password" class="form-control" id="password">
                                </div>
                            </div>
                            <button type="button" class="btn btn-success" id="login">Login</button>
                            <button type="button" class="btn btn-primary" id="sign-up">Sign Up</button>
                        </div>
                    </li>
                </ul> 
                <ul class="nav nav-pills justify-content-end">
                    <li class="nav-item">
                        <button type="button" class="btn btn-danger" id="sign-out" hidden="true">Sign Out</button>
                    </li>
                </ul>
                {% if user_token %}
                <section id="navigation">
                        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
                            <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                                <li>
                                    <a class="nav-link" href="/post">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-feather" viewBox="0 0 16 16">
                                            <path d="M15.807.531c-.174-.177-.41-.289-.64-.363a3.8 3.8 0 0 0-.833-.15c-.62-.049-1.394 0-2.252.175C10.365.545 8.264 1.415 6.315 3.1S3.147 6.824 2.557 8.523c-.294.847-.44 1.634-.429 2.268.005.316.05.62.154.88q.025.061.056.122A68 68 0 0 0 .08 15.198a.53.53 0 0 0 .157.72.504.504 0 0 0 .705-.16 68 68 0 0 1 2.158-3.26c.285.141.616.195.958.182.513-.02 1.098-.188 1.723-.49 1.25-.605 2.744-1.787 4.303-3.642l1.518-1.55a.53.53 0 0 0 0-.739l-.729-.744 1.311.209a.5.5 0 0 0 .443-.15l.663-.684c.663-.68 1.292-1.325 1.763-1.892.314-.378.585-.752.754-1.107.163-.345.278-.773.112-1.188a.5.5 0 0 0-.112-.172M3.733 11.62C5.385 9.374 7.24 7.215 9.309 5.394l1.21 1.234-1.171 1.196-.027.03c-1.5 1.789-2.891 2.867-3.977 3.393-.544.263-.99.378-1.324.39a1.3 1.3 0 0 1-.287-.018Zm6.769-7.22c1.31-1.028 2.7-1.914 4.172-2.6a7 7 0 0 1-.4.523c-.442.533-1.028 1.134-1.681 1.804l-.51.524zm3.346-3.357C9.594 3.147 6.045 6.8 3.149 10.678c.007-.464.121-1.086.37-1.806.533-1.535 1.65-3.415 3.455-4.976 1.807-1.561 3.746-2.36 5.31-2.68a8 8 0 0 1 1.564-.173"/>
                                        </svg>
                                    </a>
                                </li>
                                <div class="dropdown">
                                    <a role="button" href="#" class="btn btn-secondary dropdown-toggle" id="dropdownMenu" data-bs-toggle="dropdown">
                                        {{ user_info.get("username") }}
                                    </a>
                                    <ul class="dropdown-menu" aria-labelledby="dropdownMenu">
                                        <li>
                                            <a class="dropdown-item nav-link" href="/profile">
                                                <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                                                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                                                    <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                                                  </svg> Profile
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </ul>
                        </div>
                </section>
                    <aside style="margin-top: 30px;">
                        <a class="navbar-brand" href="/">
                            <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" fill="currentColor" class="bi bi-house-fill" viewBox="0 0 16 16">
                                <path d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"/>
                                <path d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"/>
                            </svg> <span style="font-weight: bold;">Home</span>
                        </a>
                        <form class="d-flex" action="/search-username" method="post" style="margin: 0 10px;">
                            <input name="username" type="search" placeholder="username" aria-label="Search">
                            <button id="search-user" class="btn btn-outline-primary" type="submit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                </svg>
                            </button>
                        </form>
                        <form class="d-flex" action="/search-tweet" method="post" style="margin: 0 10px;">
                            <input name="content" type="search" placeholder="keyword" aria-label="Search">
                            <button id="search-tweet" class="btn btn-outline-primary" type="submit">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                    <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                </svg>
                            </button>
                        </form>
                    </aside>
                    <section id="timeline" style="margin: 100px 200px;">
                        {% if errors %}
                            <ul>
                                <li class="alert alert-danger">{{ errors }}</li>
                            </ul>
                        {% endif %}
                        {% for tweet in tweets %}
                            <p>{{ tweet.get("body") }}</p>
                            {% if tweet.get('image_url') %}
                                <img src="{{ tweet.get('image_url') }}" alt="Image for this tweet" height="100px" width="100px">
                            {% endif %}
                            <p style="font-size: smaller; font-style: italic; text-align: right;">{{ tweet.get("username") }} on {{ tweet.get("date") }}</p>
                            <hr>
                        {% endfor %}
                    </section>
                {% endif %}
            </main>
        {% endblock content %}
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        </body>
</html>